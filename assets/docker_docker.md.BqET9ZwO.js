import{_ as s,c as i,o as a,a4 as n}from"./chunks/framework.DdXzrN3b.js";const g=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"docker/docker.md","filePath":"docker/docker.md","lastUpdated":1723126796000}'),e={name:"docker/docker.md"},l=n(`<h2 id="_1-å®‰è£…docker" tabindex="-1">1. å®‰è£…docker <a class="header-anchor" href="#_1-å®‰è£…docker" aria-label="Permalink to &quot;1. å®‰è£…docker&quot;">â€‹</a></h2><h3 id="_1-1-åœ¨çº¿å®‰è£…" tabindex="-1">1.1 åœ¨çº¿å®‰è£… <a class="header-anchor" href="#_1-1-åœ¨çº¿å®‰è£…" aria-label="Permalink to &quot;1.1 åœ¨çº¿å®‰è£…&quot;">â€‹</a></h3><p>æœ¬ç¤ºä¾‹æ¥è‡ª<a href="https://docs.docker.com/engine/install/centos/" target="_blank" rel="noreferrer">dockerå®˜ç½‘</a>centosçš„å®‰è£…æ–¹å¼</p><p><strong>1. åœ¨çº¿å®‰è£…</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> yum-utils</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum-config-manager</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    --add-repo</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    https://download.docker.com/linux/centos/docker-ce.repo</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-ce</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker-ce-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> containerd.io</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>2. é•œåƒåŠ é€Ÿï¼ˆæˆ‘ä½¿ç”¨aliyunï¼‰</strong></p><p>åˆ›å»º<code>/etc/docker/daemon.json</code>æ–‡ä»¶å¹¶å¢åŠ å†…å®¹ï¼Œé‡å¯dockeræœåŠ¡</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vi</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/docker/daemon.json</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;registry-mirrors&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://0oiclv7w.mirror.aliyuncs.com&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> daemon-reload</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> restart</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  &quot;registry-mirrors&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://docker.mirrors.ustc.edu.cn/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p><strong>3. å¯åŠ¨docker</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> start</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>4. å¼€æœºå¯åŠ¨</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">systemctl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><strong>5. å¸è½½docker</strong></p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-client</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-client-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-common</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-latest</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-latest-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-logrotate</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> \\</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           docker-engine</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-åŸºç¡€å‘½ä»¤" tabindex="-1">2. åŸºç¡€å‘½ä»¤ <a class="header-anchor" href="#_2-åŸºç¡€å‘½ä»¤" aria-label="Permalink to &quot;2. åŸºç¡€å‘½ä»¤&quot;">â€‹</a></h2><h3 id="_2-1-dockeræœåŠ¡å‘½ä»¤" tabindex="-1">2.1 dockeræœåŠ¡å‘½ä»¤ <a class="header-anchor" href="#_2-1-dockeræœåŠ¡å‘½ä»¤" aria-label="Permalink to &quot;2.1 dockeræœåŠ¡å‘½ä»¤&quot;">â€‹</a></h3><table tabindex="0"><thead><tr><th>å‘½ä»¤</th><th>ä½œç”¨</th></tr></thead><tbody><tr><td>systemctl start docker</td><td>å¯åŠ¨docker</td></tr><tr><td>systemctl stop docker</td><td>åœæ­¢docker</td></tr><tr><td>systemctl restart docker</td><td>é‡å¯docker</td></tr><tr><td>systemctl status docker</td><td>æŸ¥çœ‹dockerçŠ¶æ€</td></tr><tr><td>systemctl enable docker</td><td>å¼€æœºå¯åŠ¨</td></tr><tr><td>docker info</td><td>æŸ¥çœ‹dockeræ¦‚è¦ä¿¡æ¯</td></tr><tr><td>docker --help</td><td>æŸ¥çœ‹dockeræ€»ä½“å¸®åŠ©æ–‡æ¡£</td></tr><tr><td>docker command --help</td><td>æŸ¥çœ‹dockerå‘½ä»¤å¸®åŠ©æ–‡æ¡£</td></tr></tbody></table><h3 id="_2-2-dockeré•œåƒå‘½ä»¤" tabindex="-1">2.2 dockeré•œåƒå‘½ä»¤ <a class="header-anchor" href="#_2-2-dockeré•œåƒå‘½ä»¤" aria-label="Permalink to &quot;2.2 dockeré•œåƒå‘½ä»¤&quot;">â€‹</a></h3><h4 id="_2-2-1-docker-images" tabindex="-1">2.2.1 docker images <a class="header-anchor" href="#_2-2-1-docker-images" aria-label="Permalink to &quot;2.2.1 docker images&quot;">â€‹</a></h4><p>åˆ—å‡ºé•œåƒåˆ—è¡¨</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> images</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">REPOSITORY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         TAG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        SIZE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">guacamole/guacd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                    latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ee0b218233ff</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   9</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> days</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     271MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">golang</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             1.16-alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   7e352955f83c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weeks</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    302MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        c059bfaa849c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weeks</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    5.59MB</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>åˆ—å‡ºçš„é•œåƒåˆ—è¯´æ˜ï¼š</p><ul><li>**REPOSITORYï¼š**è¡¨ç¤ºé•œåƒçš„ä»“åº“æº</li><li>**TAGï¼š**é•œåƒçš„æ ‡ç­¾,åŒä¸€ä»“åº“æºå¯ä»¥æœ‰å¤šä¸ª TAGï¼Œä»£è¡¨è¿™ä¸ªä»“åº“æºçš„ä¸åŒä¸ªç‰ˆæœ¬</li><li>**IMAGE IDï¼š**é•œåƒID</li><li>**CREATEDï¼š**é•œåƒåˆ›å»ºæ—¶é—´ï¼Œä¸æ˜¯æˆ‘ä»¬pullçš„æ—¶é—´</li><li>**SIZEï¼š**é•œåƒå¤§å°</li></ul><h4 id="_2-2-2-docker-search" tabindex="-1">2.2.2 docker search <a class="header-anchor" href="#_2-2-2-docker-search" aria-label="Permalink to &quot;2.2.2 docker search&quot;">â€‹</a></h4><p>æœç´¢éœ€è¦çš„é•œåƒï¼šdocker search é•œåƒåå­—</p><p>--limit : åªåˆ—å‡ºNä¸ªé•œåƒï¼Œé»˜è®¤25ä¸ª <code> docker search --limit 5 redis</code></p><h4 id="_2-2-3-docker-pull" tabindex="-1">2.2.3 docker pull <a class="header-anchor" href="#_2-2-3-docker-pull" aria-label="Permalink to &quot;2.2.3 docker pull&quot;">â€‹</a></h4><p>æ‹‰å–æŒ‡å®šé•œåƒï¼šdocker pull é•œåƒåå­—[:TAG] æ²¡æœ‰TAGå°±æ˜¯æœ€æ–°ç‰ˆ,docker pull é•œåƒåå­—:latest</p><h4 id="_2-2-4-docker-rmi" tabindex="-1">2.2.4 docker rmi <a class="header-anchor" href="#_2-2-4-docker-rmi" aria-label="Permalink to &quot;2.2.4 docker rmi&quot;">â€‹</a></h4><p>åˆ é™¤é•œåƒï¼š</p><ul><li>å•ä¸ªï¼šdocker rmi -f é•œåƒID</li><li>å¤šä¸ªï¼šdocker rmi -f é•œåƒå1:TAG é•œåƒå2:TAG</li><li>å…¨éƒ¨ï¼šdocker rmi -f $(docker images -qa)</li></ul><p>åˆ é™¤æ‰€æœ‰æœªæ‰“ dangling æ ‡ç­¾çš„é•œåƒ:<code>docker rmi $(docker images -q -f dangling=true)</code></p><h4 id="_2-2-5-docker-system-df" tabindex="-1">2.2.5 docker system df <a class="header-anchor" href="#_2-2-5-docker-system-df" aria-label="Permalink to &quot;2.2.5 docker system df&quot;">â€‹</a></h4><p>æŸ¥çœ‹é•œåƒ/å®¹å™¨/æ•°æ®å·æ‰€å çš„ç©ºé—´</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> system</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> df</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">TYPE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">            TOTAL</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     ACTIVE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    SIZE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      RECLAIMABLE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Images</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">          7</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         3.915GB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   374.5MB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (9%)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Containers</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      4</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         2.392MB</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   0B</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (0%)</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Local</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Volumes</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         0B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        0B</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Build</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Cache</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">     0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">         0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         0B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        0B</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><blockquote><p>æœ‰çš„æ—¶é—´æˆ‘ä»¬ä¼šçœ‹è§æœ‰äº›é•œåƒçš„åç§°æ˜¯noneï¼ŒTAGä¹Ÿæ˜¯noneï¼Œè¿™ç§æƒ…å†µæˆ‘ä»¬ä¸€èˆ¬ç§°ä¹‹ä¸ºè™šæ‚¬é•œåƒï¼Œé‡åˆ°è™šæ‚¬é•œåƒï¼Œä¸€èˆ¬å¤„ç†æ–¹å¼æ˜¯ç›´æ¥åˆ é™¤ï¼Œä¸€èˆ¬æ˜¯æˆ‘ä»¬è‡ªå·±åˆ¶ä½œé•œåƒçš„æ—¶å€™å‘ç”Ÿ</p></blockquote><h3 id="_2-3-dockerå®¹å™¨å‘½ä»¤" tabindex="-1">2.3 dockerå®¹å™¨å‘½ä»¤ <a class="header-anchor" href="#_2-3-dockerå®¹å™¨å‘½ä»¤" aria-label="Permalink to &quot;2.3 dockerå®¹å™¨å‘½ä»¤&quot;">â€‹</a></h3><h4 id="_2-3-1-docker-run" tabindex="-1">2.3.1 docker run <a class="header-anchor" href="#_2-3-1-docker-run" aria-label="Permalink to &quot;2.3.1 docker run&quot;">â€‹</a></h4><p>ç”±äºè¿™ä¸ªå‘½ä»¤æ¯”è¾ƒå¤æ‚ï¼Œä¸‹é¢å°†ä»¥å…·ä½“çš„æ­¥éª¤è¿›è¡Œæ¼”ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬è¦çŸ¥é“<code>docker run</code>è¿è¡Œçš„æµç¨‹</p><p>ç”¨æˆ·æ‰§è¡Œ<code>docker run</code>æ¥å¯åŠ¨å®¹å™¨çš„æ—¶å€™ï¼ŒdockeræœåŠ¡ç«¯ä¼šå…ˆæ£€æŸ¥æœ¬åœ°æœ‰æ²¡æœ‰runçš„é•œåƒï¼Œå¦‚æœæœ‰ï¼Œé‚£ä¹ˆdockerç›´æ¥ä½¿ç”¨è¿™ä¸ªé•œåƒ</p><p>æ ¼å¼ï¼šdocker run [OPTIONS] IMAGE [COMMAND] [ARG...]</p><p><strong>OPTIONSè¯´æ˜ï¼ˆå¸¸ç”¨ï¼‰</strong>ï¼šå•è¯ç”¨ä¸¤ä¸ª-- ç®€å†™ç”¨ä¸€ä¸ª-</p><ul><li>--name=&quot;å®¹å™¨æ–°åå­—&quot; ä¸ºå®¹å™¨æŒ‡å®šä¸€ä¸ªåç§°ï¼›</li><li>-d: åå°è¿è¡Œå®¹å™¨å¹¶è¿”å›å®¹å™¨IDï¼Œä¹Ÿå³å¯åŠ¨å®ˆæŠ¤å¼å®¹å™¨(åå°è¿è¡Œ)ï¼›</li><li>-iï¼šä»¥äº¤äº’æ¨¡å¼è¿è¡Œå®¹å™¨ï¼Œé€šå¸¸ä¸ -t åŒæ—¶ä½¿ç”¨ï¼›</li><li>-tï¼šä¸ºå®¹å™¨é‡æ–°åˆ†é…ä¸€ä¸ªä¼ªè¾“å…¥ç»ˆç«¯ï¼Œé€šå¸¸ä¸ -i åŒæ—¶ä½¿ç”¨ï¼›ä¹Ÿå³å¯åŠ¨äº¤äº’å¼å®¹å™¨(å‰å°æœ‰ä¼ªç»ˆç«¯ï¼Œç­‰å¾…äº¤äº’)ï¼›</li><li>-P: éšæœºç«¯å£æ˜ å°„ï¼Œå¤§å†™Pï¼Œä¸€èˆ¬ä¸ä½¿ç”¨</li><li>-p: æŒ‡å®šç«¯å£æ˜ å°„ï¼Œå°å†™p ï¼Œå¸¸ç”¨</li><li><strong>-v</strong>:æŒ‚è½½å®¹å™¨å·ï¼Œåšæ•°æ®æŒä¹…åŒ–ï¼Œé»˜è®¤æ˜¯è¯»å†™æƒé™<code>rw</code>ï¼Œå¦‚æœåªè¯»åªéœ€è¦åœ¨ç»“å°¾åŠ ä¸Š <code>:ro</code>å³å¯</li></ul><p>â€‹ <strong>-v /å®¿ä¸»æœºç»å¯¹è·¯å¾„ç›®å½•:/å®¹å™¨å†…ç›®å½• [:ro]</strong></p><ul><li><p><strong>--volumes-from</strong> çˆ¶ç±»ï¼šç»§æ‰¿å…¶ä»–å®¹å™¨æŒ‚è½½å®¹å™¨å·ï¼Œçˆ¶å®¹å™¨å³ä¾¿è¢«åˆ é™¤ï¼Œå­å®¹å™¨çš„æŒ‚è½½ä¸ä¼šæœ‰å˜åŒ–</p></li><li><p><strong>--privileged=true</strong>ï¼šå¦‚æœæ˜¯CentOS7å®‰å…¨æ¨¡å—ä¼šæ¯”ä¹‹å‰ç³»ç»Ÿç‰ˆæœ¬åŠ å¼ºï¼Œä¸å®‰å…¨çš„ä¼šå…ˆç¦æ­¢ï¼Œæ‰€ä»¥ç›®å½•æŒ‚è½½çš„æƒ…å†µè¢«é»˜è®¤ä¸ºä¸å®‰å…¨çš„è¡Œä¸ºï¼Œåœ¨SELinuxé‡Œé¢æŒ‚è½½ç›®å½•è¢«ç¦æ­¢æ‰äº†é¢ï¼Œå¦‚æœè¦å¼€å¯ï¼Œæˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨--privileged=trueå‘½ä»¤ï¼Œæ‰©å¤§å®¹å™¨çš„æƒé™è§£å†³æŒ‚è½½ç›®å½•æ²¡æœ‰æƒé™çš„é—®é¢˜ï¼Œä½¿ç”¨è¯¥å‚æ•°ï¼Œ<strong>containerå†…çš„rootæ‹¥æœ‰çœŸæ­£çš„rootæƒé™</strong>ï¼Œå¦åˆ™ï¼Œcontainerå†…çš„rootåªæ˜¯å¤–éƒ¨çš„ä¸€ä¸ªæ™®é€šç”¨æˆ·æƒé™ã€‚</p></li></ul><p>COMMANDï¼š</p><p>/bin/bashï¼šæ”¾åœ¨é•œåƒååçš„æ˜¯å‘½ä»¤ï¼Œè¿™é‡Œæˆ‘ä»¬å¸Œæœ›æœ‰ä¸ªäº¤äº’å¼ Shellï¼Œå› æ­¤ç”¨çš„æ˜¯ /bin/bashã€‚ è¦é€€å‡ºç»ˆç«¯ï¼Œç›´æ¥è¾“å…¥ exitï¼Œä¿ç•™è¿è¡Œå®¹å™¨éœ€è¦ä½¿ç”¨ctrl+p+q</p><h4 id="_2-3-2-docker-inspect" tabindex="-1">2.3.2 docker inspect <a class="header-anchor" href="#_2-3-2-docker-inspect" aria-label="Permalink to &quot;2.3.2 docker inspect&quot;">â€‹</a></h4><p>docker inspect å®¹å™¨ID æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯,æŸ¥çœ‹å®¹å™¨å†…éƒ¨ç»†èŠ‚</p><h4 id="_2-3-3-docker-logs" tabindex="-1">2.3.3 docker logs <a class="header-anchor" href="#_2-3-3-docker-logs" aria-label="Permalink to &quot;2.3.3 docker logs&quot;">â€‹</a></h4><p>æŸ¥çœ‹å®¹å™¨æ—¥å¿—ï¼šdocker logs å®¹å™¨ID</p><h4 id="_2-3-4-docker-cp" tabindex="-1">2.3.4 docker cp <a class="header-anchor" href="#_2-3-4-docker-cp" aria-label="Permalink to &quot;2.3.4 docker cp&quot;">â€‹</a></h4><p>å®¹å™¨ä¸ä¸»æœºæ–‡ä»¶æ‹·è´ ï¼šdocker cp å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„</p><p>æ³¨æ„æœ‰ä¸¤ç§æƒ…å†µ</p><ol><li>ä¸»æœºä¸Šæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨ï¼šdocker cp ä¸»æœºæ–‡ä»¶è·¯å¾„ å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„</li><li>å®¹å™¨å†…æ–‡ä»¶æ‹·è´åˆ°ä¸»æœºï¼šdocker cp å®¹å™¨ID:å®¹å™¨å†…è·¯å¾„ ç›®çš„ä¸»æœºè·¯å¾„</li></ol><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#å°†ä¸»æœºä¸Šbinæ–‡ä»¶æ‹·è´åˆ°å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  pkg</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/go/bin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 918822e6486b:/tmp/test</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># å®¹å™¨</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  bin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="_2-3-5-docker-exec" tabindex="-1">2.3.5 docker exec <a class="header-anchor" href="#_2-3-5-docker-exec" aria-label="Permalink to &quot;2.3.5 docker exec&quot;">â€‹</a></h4><p>è¿›å…¥å®¹å™¨å‘½ä»¤ç»ˆç«¯ :docker exec -it å®¹å™¨ID bashShell</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># docker exec -it 327dcdc96475 sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # cd /tmp/test/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/tmp/test</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  bin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="_2-3-6-docker-attach" tabindex="-1">2.3.6 docker attach <a class="header-anchor" href="#_2-3-6-docker-attach" aria-label="Permalink to &quot;2.3.6 docker attach&quot;">â€‹</a></h4><p>è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤ç»ˆç«¯ :docker attach å®¹å™¨ID</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> attach</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 327</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">              </span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/test/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.txt</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  bin</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><blockquote><p>attach ç›´æ¥è¿›å…¥å®¹å™¨å¯åŠ¨å‘½ä»¤çš„ç»ˆç«¯ï¼Œä¸ä¼šå¯åŠ¨æ–°çš„è¿›ç¨‹ï¼Œç”¨exité€€å‡ºï¼Œä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</p><p>exec æ˜¯åœ¨å®¹å™¨ä¸­æ‰“å¼€æ–°çš„ç»ˆç«¯ï¼Œå¹¶ä¸”å¯åŠ¨æ–°çš„è¿›ç¨‹ï¼Œç”¨exité€€å‡ºï¼Œä¸ä¼šå¯¼è‡´å®¹å™¨çš„åœæ­¢ã€‚</p><p>ä¸¤è€…ä½¿ç”¨å¿«æ·é”®ï¼š<strong>ctrl+p+q</strong> é€€å‡ºéƒ½ä¸ä¼šåœæ­¢å®¹å™¨</p></blockquote><h4 id="_2-3-7-docker-top" tabindex="-1">2.3.7 docker top <a class="header-anchor" href="#_2-3-7-docker-top" aria-label="Permalink to &quot;2.3.7 docker top&quot;">â€‹</a></h4><p>æŸ¥çœ‹å®¹å™¨å†…è¿è¡Œçš„è¿›ç¨‹ : docker top å®¹å™¨ID</p><h4 id="_2-3-8-dockre-rm" tabindex="-1">2.3.8 dockre rm <a class="header-anchor" href="#_2-3-8-dockre-rm" aria-label="Permalink to &quot;2.3.8 dockre rm&quot;">â€‹</a></h4><p>**è¯­æ³•ï¼š**docker rm [OPTIONS] CONTAINER [CONTAINER...]</p><p>OPTIONSè¯´æ˜ï¼š</p><ul><li>**-f ğŸ˜—*é€šè¿‡ SIGKILL ä¿¡å·å¼ºåˆ¶åˆ é™¤ä¸€ä¸ªè¿è¡Œä¸­çš„å®¹å™¨ã€‚</li><li>**-l ğŸ˜—*ç§»é™¤å®¹å™¨é—´çš„ç½‘ç»œè¿æ¥ï¼Œè€Œéå®¹å™¨æœ¬èº«ã€‚</li><li>**-v ğŸ˜—*åˆ é™¤ä¸å®¹å™¨å…³è”çš„å·</li></ul><p>åˆ é™¤æ‰€æœ‰å®¹å™¨ï¼š<code>docker rm -f $(docker ps -a -q)</code></p><p>åˆ é™¤æ‰€æœ‰æœªè¿è¡Œçš„å®¹å™¨: <code>docker container prune</code> / <code>docker rm $(docker ps -a -q)</code></p><p>åˆ é™¤æœªå¯åŠ¨æˆåŠŸï¼š<code>docker rm $(docker ps -qf status=created)</code></p><p>åˆ é™¤é€€å‡ºçŠ¶æ€: <code>docker rm $(docker ps -qf status=exited)</code></p><h4 id="_2-3-9-docker-kill" tabindex="-1">2.3.9 docker kill <a class="header-anchor" href="#_2-3-9-docker-kill" aria-label="Permalink to &quot;2.3.9 docker kill&quot;">â€‹</a></h4><p>åœæ­¢æ‰€æœ‰è¿è¡Œçš„å®¹å™¨ : <code>docker kill $(docker ps -a -q)</code></p><h3 id="_2-4-å®¹å™¨çš„å¯¼å…¥å¯¼å‡º" tabindex="-1">2.4 å®¹å™¨çš„å¯¼å…¥å¯¼å‡º <a class="header-anchor" href="#_2-4-å®¹å™¨çš„å¯¼å…¥å¯¼å‡º" aria-label="Permalink to &quot;2.4 å®¹å™¨çš„å¯¼å…¥å¯¼å‡º&quot;">â€‹</a></h3><p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¯¼å‡ºï¼Ÿ</strong></p><p>åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦å°†è‡ªå·±æ›´æ–°çš„å®¹å™¨å¯¼å‡ºç§°ä¸ºé•œåƒä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨Ubuntuå®¹å™¨å®‰è£…Javaè¿è¡Œç¯å¢ƒï¼Œæˆ‘ä»¬å¯ä»¥å°†æ­¤åˆå§‹åŒ–å¥½çš„ç¯å¢ƒå¯¼å‡ºç§°ä¸ºé•œåƒï¼Œä»¥åä½¿ç”¨æ­¤é•œåƒæ¥åˆ›å»ºå®¹å™¨ï¼Œå°±è‡ªå¸¦äº†javaçš„è¿è¡Œç¯å¢ƒï¼Œè€Œä¸ç”¨æ¯æ¬¡åˆ›å»ºå®¹å™¨éƒ½è¿›è¡Œç¯å¢ƒçš„å®‰è£…ï¼Œç±»ä¼¼è™šæ‹Ÿæœºçš„æ¨¡æ¿æ–‡ä»¶</p><p><strong>ä¸ºä»€ä¹ˆéœ€è¦å¯¼å…¥ï¼Ÿ</strong></p><p>åœ¨ä¸€ä¸ªå¼€å‘å‹çš„å…¬å¸é‡Œé¢ï¼Œä¸€èˆ¬ç ”å‘å¼€å‘å¥½ç¨‹åºå‘˜ä»¥åï¼Œé€šè¿‡Dockerfileç¼–è¯‘ç§°é•œåƒæ–‡ä»¶ï¼Œè¿ç»´éœ€è¦å°†é•œåƒæ–‡ä»¶å¯¼å…¥åˆ°dockerç¯å¢ƒä¸­runèµ·æ¥</p><p><strong>åº”ç”¨åœºæ™¯ï¼š</strong></p><p>ä¸»è¦ç”¨æ¥åˆ¶ä½œåŸºç¡€é•œåƒï¼Œæ¯”å¦‚ä»ä¸€ä¸ªubuntué•œåƒå¯åŠ¨ä¸€ä¸ªå®¹å™¨ï¼Œç„¶åå®‰è£…ä¸€äº›è½¯ä»¶å’Œè¿›è¡Œä¸€äº›è®¾ç½®åï¼Œä½¿ç”¨docker exportä¿å­˜ä¸ºä¸€ä¸ªåŸºç¡€é•œåƒã€‚ç„¶åï¼ŒæŠŠè¿™ä¸ªé•œåƒåˆ†å‘ç»™å…¶ä»–äººä½¿ç”¨ï¼Œæ¯”å¦‚ä½œä¸ºåŸºç¡€çš„å¼€å‘ç¯å¢ƒã€‚</p><h4 id="_2-4-1-å®¹å™¨å¯¼å‡º" tabindex="-1">2.4.1 å®¹å™¨å¯¼å‡º <a class="header-anchor" href="#_2-4-1-å®¹å™¨å¯¼å‡º" aria-label="Permalink to &quot;2.4.1 å®¹å™¨å¯¼å‡º&quot;">â€‹</a></h4><p>docker export å®¹å™¨ID &gt; æ–‡ä»¶å.tar</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root@kali:~#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> export</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 9188</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> &gt;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myAlpine.tar.gz</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root@kali:~#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">myAlpine.tar.gz</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  thinclient_drives</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="_2-4-2-å®¹å™¨å¯¼å…¥" tabindex="-1">2.4.2 å®¹å™¨å¯¼å…¥ <a class="header-anchor" href="#_2-4-2-å®¹å™¨å¯¼å…¥" aria-label="Permalink to &quot;2.4.2 å®¹å™¨å¯¼å…¥&quot;">â€‹</a></h4><p>cat æ–‡ä»¶å.tar | docker import - é•œåƒç”¨æˆ·/é•œåƒå:é•œåƒç‰ˆæœ¬å·</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root@kali:~#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cat</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> myAlpine.tar.gz</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">|</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> import</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> moujun/my-alpine:0.0.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sha256:0a79a0402e43234468b0896277bf342c385f73134ac21ecde0e012c946fa0318</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root@kali:~#</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> docker</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> images</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                       </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">REPOSITORY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         TAG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">           IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moujun/my-alpine</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">                   0.0.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         0a79a0402e43</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   5.59MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        c059bfaa849c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weeks</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     5.59MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ubuntu</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                             latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">        ba6acccedd29</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   3</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> months</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    72.8MB</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">root@kali:~#</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>æ³¨æ„ï¼Œé•œåƒåç§°å¿…é¡»è¦å°å†™ï¼Œå¦åˆ™æŠ¥é”™</p><h3 id="_2-5-é•œåƒæ¨é€" tabindex="-1">2.5 é•œåƒæ¨é€ <a class="header-anchor" href="#_2-5-é•œåƒæ¨é€" aria-label="Permalink to &quot;2.5 é•œåƒæ¨é€&quot;">â€‹</a></h3><h4 id="_2-5-1-ç™»å½•-docker-login" tabindex="-1">2.5.1 ç™»å½• docker login <a class="header-anchor" href="#_2-5-1-ç™»å½•-docker-login" aria-label="Permalink to &quot;2.5.1  ç™»å½• docker login&quot;">â€‹</a></h4><h4 id="_2-5-2-ä¿®æ”¹æ ‡ç­¾-docker-tag" tabindex="-1">2.5.2 ä¿®æ”¹æ ‡ç­¾ docker tag <a class="header-anchor" href="#_2-5-2-ä¿®æ”¹æ ‡ç­¾-docker-tag" aria-label="Permalink to &quot;2.5.2  ä¿®æ”¹æ ‡ç­¾ docker tag&quot;">â€‹</a></h4><p><code>docker tag moujun:0.0.1 moujunmore/umi:0.0.1</code></p><p><strong>moujun</strong>:0.0.1:ä¸ºåŸé•œåƒåç§°</p><p><strong>moujunmore/umi:0.0.1</strong>ï¼šä¸ºç¬¦åˆdocker hubæ¨é€è¦æ±‚çš„é•œåƒåç§°</p><h4 id="_2-5-3-docker-push" tabindex="-1">2.5.3 docker push <a class="header-anchor" href="#_2-5-3-docker-push" aria-label="Permalink to &quot;2.5.3 docker push&quot;">â€‹</a></h4><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@more tmp]# docker push moujunmore/umi:0.0.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">The</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> push</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> refers</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repository</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [docker.io/moujunmore/umi]</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">c569ef711d3f:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">46da2b1c58ba:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">2503893bd420:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1686740e8bf1:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">98b38fd98eb3:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0cf3d17b4494:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">392246cbae6c:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">f6e6b207d1f6:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1d59199e80ce:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">5b95e425ec84:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Pushed</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">8d3ac3489996:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Layer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> already</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> exists</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> </span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">0.0.1:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> digest:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sha256:af14bfe72476acf8f4504186d04a68682b41cf5fb1a095a7a5aa6ecbf9bd006b</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> size:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2627</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@more tmp]# history</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h2 id="_3-è®¤è¯†é•œåƒ" tabindex="-1">3. è®¤è¯†é•œåƒ <a class="header-anchor" href="#_3-è®¤è¯†é•œåƒ" aria-label="Permalink to &quot;3. è®¤è¯†é•œåƒ&quot;">â€‹</a></h2><p>é•œåƒï¼šæ˜¯ä¸€ç§è½»é‡çº§ã€å¯æ‰§è¡Œçš„ç‹¬ç«‹è½¯ä»¶åŒ…ï¼Œå®ƒåŒ…å«è¿è¡ŒæŸä¸ªè½¯ä»¶æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œæˆ‘ä»¬æŠŠåº”ç”¨ç¨‹åºå’Œé…ç½®ä¾èµ–æ‰“åŒ…å¥½å½¢æˆä¸€ä¸ªå¯äº¤ä»˜çš„è¿è¡Œç¯å¢ƒ(åŒ…æ‹¬ä»£ç ã€è¿è¡Œæ—¶éœ€è¦çš„åº“ã€ç¯å¢ƒå˜é‡å’Œé…ç½®æ–‡ä»¶ç­‰)ï¼Œè¿™ä¸ªæ‰“åŒ…å¥½çš„è¿è¡Œç¯å¢ƒå°±æ˜¯imageé•œåƒæ–‡ä»¶ã€‚å…¶å®ä½œç”¨è·ŸVMé‡Œé¢çš„ISOæ–‡ä»¶ç±»ä¼¼</p><h3 id="_3-1-unionfs-è”åˆæ–‡ä»¶ç³»ç»Ÿ" tabindex="-1">3.1 UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ <a class="header-anchor" href="#_3-1-unionfs-è”åˆæ–‡ä»¶ç³»ç»Ÿ" aria-label="Permalink to &quot;3.1 UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰&quot;">â€‹</a></h3><p>UnionFSï¼ˆè”åˆæ–‡ä»¶ç³»ç»Ÿï¼‰ï¼šUnionæ–‡ä»¶ç³»ç»Ÿï¼ˆUnionFSï¼‰æ˜¯ä¸€ç§åˆ†å±‚ã€è½»é‡çº§å¹¶ä¸”é«˜æ€§èƒ½çš„æ–‡ä»¶ç³»ç»Ÿï¼Œå®ƒæ”¯æŒå¯¹æ–‡ä»¶ç³»ç»Ÿçš„ä¿®æ”¹ä½œä¸ºä¸€æ¬¡æäº¤æ¥ä¸€å±‚å±‚çš„å åŠ ï¼ŒåŒæ—¶å¯ä»¥å°†ä¸åŒç›®å½•æŒ‚è½½åˆ°åŒä¸€ä¸ªè™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿä¸‹(unite several directories into a single virtual filesystem)ã€‚Union æ–‡ä»¶ç³»ç»Ÿæ˜¯ Docker é•œåƒçš„åŸºç¡€ã€‚é•œåƒå¯ä»¥é€šè¿‡åˆ†å±‚æ¥è¿›è¡Œç»§æ‰¿ï¼ŒåŸºäºåŸºç¡€é•œåƒï¼ˆæ²¡æœ‰çˆ¶é•œåƒï¼‰ï¼Œå¯ä»¥åˆ¶ä½œå„ç§å…·ä½“çš„åº”ç”¨é•œåƒã€‚</p><p>ç‰¹æ€§ï¼šä¸€æ¬¡åŒæ—¶åŠ è½½å¤šä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œä½†ä»å¤–é¢çœ‹èµ·æ¥ï¼Œåªèƒ½çœ‹åˆ°ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿï¼Œè”åˆåŠ è½½ä¼šæŠŠå„å±‚æ–‡ä»¶ç³»ç»Ÿå åŠ èµ·æ¥ï¼Œè¿™æ ·æœ€ç»ˆçš„æ–‡ä»¶ç³»ç»Ÿä¼šåŒ…å«æ‰€æœ‰åº•å±‚çš„æ–‡ä»¶å’Œç›®å½•</p><h3 id="_3-2-é•œåƒåŠ è½½è¿‡ç¨‹" tabindex="-1">3.2 é•œåƒåŠ è½½è¿‡ç¨‹ <a class="header-anchor" href="#_3-2-é•œåƒåŠ è½½è¿‡ç¨‹" aria-label="Permalink to &quot;3.2 é•œåƒåŠ è½½è¿‡ç¨‹&quot;">â€‹</a></h3><p>é€šè¿‡è§‚å¯Ÿpullï¼Œæˆ‘ä»¬å‘ç°åœ¨ä¸‹è½½dockerçš„é•œåƒè¿‡ç¨‹ä¸­ï¼Œé•œåƒå¥½åƒæ˜¯åœ¨ä¸€å±‚ä¸€å±‚çš„åœ¨ä¸‹è½½ï¼Œè¿™æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ</p><p>é•œåƒåˆ†å±‚æœ€å¤§çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯å…±äº«èµ„æºï¼Œæ–¹ä¾¿å¤åˆ¶è¿ç§»ï¼Œå°±æ˜¯ä¸ºäº†å¤ç”¨ã€‚</p><p>æ¯”å¦‚è¯´æœ‰å¤šä¸ªé•œåƒéƒ½ä»ç›¸åŒçš„ base é•œåƒæ„å»ºè€Œæ¥ï¼Œé‚£ä¹ˆ Docker Host åªéœ€åœ¨ç£ç›˜ä¸Šä¿å­˜ä¸€ä»½ base é•œåƒï¼› åŒæ—¶å†…å­˜ä¸­ä¹Ÿåªéœ€åŠ è½½ä¸€ä»½ base é•œåƒï¼Œå°±å¯ä»¥ä¸ºæ‰€æœ‰å®¹å™¨æœåŠ¡äº†ã€‚è€Œä¸”é•œåƒçš„æ¯ä¸€å±‚éƒ½å¯ä»¥è¢«å…±äº«ã€‚</p><h3 id="_3-3-dockeré•œåƒåŠ è½½åŸç†" tabindex="-1">3.3 Dockeré•œåƒåŠ è½½åŸç†ï¼š <a class="header-anchor" href="#_3-3-dockeré•œåƒåŠ è½½åŸç†" aria-label="Permalink to &quot;3.3 Dockeré•œåƒåŠ è½½åŸç†ï¼š&quot;">â€‹</a></h3><p>dockerçš„é•œåƒå®é™…ä¸Šç”±ä¸€å±‚ä¸€å±‚çš„æ–‡ä»¶ç³»ç»Ÿç»„æˆï¼Œè¿™ç§å±‚çº§çš„æ–‡ä»¶ç³»ç»ŸUnionFSã€‚ bootfs(boot file system)ä¸»è¦åŒ…å«bootloaderå’Œkernel, bootloaderä¸»è¦æ˜¯å¼•å¯¼åŠ è½½kernel, Linuxåˆšå¯åŠ¨æ—¶ä¼šåŠ è½½bootfsæ–‡ä»¶ç³»ç»Ÿï¼Œåœ¨Dockeré•œåƒçš„æœ€åº•å±‚æ˜¯å¼•å¯¼æ–‡ä»¶ç³»ç»Ÿbootfsã€‚è¿™ä¸€å±‚ä¸æˆ‘ä»¬å…¸å‹çš„Linux/Unixç³»ç»Ÿæ˜¯ä¸€æ ·çš„ï¼ŒåŒ…å«bootåŠ è½½å™¨å’Œå†…æ ¸ã€‚å½“bootåŠ è½½å®Œæˆä¹‹åæ•´ä¸ªå†…æ ¸å°±éƒ½åœ¨å†…å­˜ä¸­äº†ï¼Œæ­¤æ—¶å†…å­˜çš„ä½¿ç”¨æƒå·²ç”±bootfsè½¬äº¤ç»™å†…æ ¸ï¼Œæ­¤æ—¶ç³»ç»Ÿä¹Ÿä¼šå¸è½½bootfsã€‚</p><p>rootfs (root file system) ï¼Œåœ¨bootfsä¹‹ä¸Šã€‚åŒ…å«çš„å°±æ˜¯å…¸å‹ Linux ç³»ç»Ÿä¸­çš„ /dev, /proc, /bin, /etc ç­‰æ ‡å‡†ç›®å½•å’Œæ–‡ä»¶ã€‚rootfså°±æ˜¯å„ç§ä¸åŒçš„æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆï¼Œæ¯”å¦‚Ubuntuï¼ŒCentosç­‰ç­‰ã€‚</p><p><img src="https://images2018.cnblogs.com/blog/799055/201803/799055-20180309154723871-127136242.png" alt="é•œåƒåˆ†å±‚"></p><h4 style="color:red;">3.4 Dockerä»…å®¹å™¨å±‚å¯å†™</h4><p>æ‰€æœ‰å¯åŠ¨çš„å®¹å™¨ï¼Œéƒ½æ˜¯å†åŸæ¥çš„é•œåƒé¡¶éƒ¨åŠ è½½ä¸€å±‚ï¼Œè¿™ä¸€å±‚é€šå¸¸è¢«ç§°ä½œâ€œå®¹å™¨å±‚â€,â€œå®¹å™¨å±‚â€ä¹‹ä¸‹çš„éƒ½å«â€œé•œåƒå±‚â€ã€‚å¹¶ä¸”ä»»ä½•å†™æ“ä½œéƒ½ä¸ä¼šå½±å“åˆ°é•œåƒå±‚ï¼Œé•œåƒå±‚ä¸å¯ç”¨å†™å…¥</p><h3 id="_3-5-docker-commit" tabindex="-1">3.5 docker commit <a class="header-anchor" href="#_3-5-docker-commit" aria-label="Permalink to &quot;3.5 docker commit&quot;">â€‹</a></h3><p>docker commitæäº¤å®¹å™¨å‰¯æœ¬ä½¿ä¹‹æˆä¸ºä¸€ä¸ªæ–°çš„é•œåƒï¼Œæ ¼å¼ï¼š</p><p>docker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[æ ‡ç­¾å]</p><p>å®éªŒæ­¥éª¤ï¼š</p><ol><li><p>åˆ›å»ºä¸€ä¸ªå®¹å™¨ï¼š<code>docker run -it alpine sh</code></p></li><li><p>ä¿®æ”¹å®¹å™¨ï¼š</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # touch 1.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li><li><p>æäº¤å®¹å™¨ï¼šdocker commit -m=&quot;æäº¤çš„æè¿°ä¿¡æ¯&quot; -a=&quot;ä½œè€…&quot; å®¹å™¨ID è¦åˆ›å»ºçš„ç›®æ ‡é•œåƒå:[æ ‡ç­¾å]</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@VM-0-10-centos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# docker ps</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">CONTAINER</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     COMMAND</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         STATUS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         PORTS</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     NAMES</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1894e6a5aaff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    &quot;sh&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">      5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minutes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   Up</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> minutes</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             musing_dirac</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@VM-0-10-centos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# docker commit -m</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;æäº¤æµ‹è¯•&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> -a</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;moujun&quot;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1894e6a5aaff</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> moujun/alpine:1.0.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sha256:dc645a41ed81afc56d484f6d7d9a406192ff3176a3bc8e398bb7e4d489084828</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@VM-0-10-centos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# docker images</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">REPOSITORY</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      TAG</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       IMAGE</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ID</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       CREATED</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">         SIZE</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">moujun/alpine</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   1.0.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     dc645a41ed81</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> seconds</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">   5.59MB</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">alpine</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          latest</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    c059bfaa849c</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">   7</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> weeks</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ago</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     5.59MB</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@VM-0-10-centos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]#</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li><li><p>ä½¿ç”¨åˆ›å»ºçš„é•œåƒç”Ÿäº§å®¹å™¨æŸ¥çœ‹ä¿®æ”¹å†…å®¹</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[root@VM-0-10-centos </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]# docker run -it moujun/alpine:1.0.0 sh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # cd /home/</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # ls</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">1.txt</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">/home</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol><h2 id="_4-dockerfile" tabindex="-1">4. Dockerfile <a class="header-anchor" href="#_4-dockerfile" aria-label="Permalink to &quot;4. Dockerfile&quot;">â€‹</a></h2><p>Dockerfileæ˜¯ç”¨æ¥æ„å»ºDockeré•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¯ç”±ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œå‚æ•°æ„æˆçš„è„šæœ¬ã€‚</p><p>æ„å»ºå‘½ä»¤ï¼š<code>docker build .</code></p><p>è¦åœ¨æ„å»ºä¸Šä¸‹æ–‡ä¸­ä½¿ç”¨æ–‡ä»¶ï¼Œ<code>Dockerfile</code>æŒ‡çš„æ˜¯åœ¨æŒ‡ä»¤ä¸­æŒ‡å®šçš„æ–‡ä»¶ï¼Œä¾‹å¦‚<code>COPY</code>æŒ‡ä»¤ã€‚è¦æé«˜æ„å»ºçš„æ€§èƒ½ï¼Œè¯·é€šè¿‡å°†<code>.dockerignore</code>æ–‡ä»¶æ·»åŠ åˆ°ä¸Šä¸‹æ–‡ç›®å½•æ¥æ’é™¤æ–‡ä»¶å’Œç›®å½•ã€‚</p><h3 id="_4-1-dockerfileæŒ‡ä»¤" tabindex="-1">4.1 DockerfileæŒ‡ä»¤ <a class="header-anchor" href="#_4-1-dockerfileæŒ‡ä»¤" aria-label="Permalink to &quot;4.1 DockerfileæŒ‡ä»¤&quot;">â€‹</a></h3><p>æˆ‘ä»¬ç¼–å†™Dockerfileæ—¶ï¼Œæœ€é‡è¦çš„æ˜¯ç†è§£å…¶ä¸­çš„æŒ‡ä»¤å«ä¹‰ï¼Œç”±äºå¸¸ç”¨æŒ‡ä»¤ä¸å¤šï¼Œæˆ‘ä»¬å¯ä»¥åˆ†åˆ«åšè¯´æ˜</p><p>æŒ‡ä»¤ä¸åŒºåˆ†å¤§å°å†™ã€‚ä½†æ˜¯ï¼Œ<strong>çº¦å®šæ˜¯å¤§å†™çš„</strong>ï¼Œä»¥ä¾¿æ›´å®¹æ˜“åœ°å°†å®ƒä»¬ä¸å‚æ•°åŒºåˆ†å¼€æ¥ã€‚</p><h4 id="_4-1-1-from" tabindex="-1">4.1.1 FROM <a class="header-anchor" href="#_4-1-1-from" aria-label="Permalink to &quot;4.1.1 FROM&quot;">â€‹</a></h4><div class="language- vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>FROM [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>è¯¥<code>FROM</code>æŒ‡ä»¤åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„æ„å»ºé˜¶æ®µå¹¶ä¸ºåç»­æŒ‡ä»¤è®¾ç½® åŸºæœ¬æ˜ åƒã€‚å› æ­¤ï¼Œæœ‰æ•ˆ<code>Dockerfile</code>å¿…é¡»ä»¥<code>FROM</code>æŒ‡ä»¤å¼€å§‹ã€‚</p><h4 id="_4-1-2-run" tabindex="-1">4.1.2 RUN <a class="header-anchor" href="#_4-1-2-run" aria-label="Permalink to &quot;4.1.2 RUN&quot;">â€‹</a></h4><p>RUN æœ‰ä¸¤ç§å½¢å¼ï¼š</p><ul><li><code>RUN &lt;command&gt;</code>shellå½¢å¼ï¼Œå‘½ä»¤åœ¨ shell ä¸­è¿è¡Œ</li><li><code>RUN [&quot;executable&quot;, &quot;param1&quot;, &quot;param2&quot;]</code>ï¼ˆ<em>æ‰§è¡Œ</em>å½¢å¼ï¼‰</li></ul><p>è¯¥<code>RUN</code>æŒ‡ä»¤å°†åœ¨å½“å‰é•œåƒä¹‹ä¸Šçš„æ–°å±‚ä¸­æ‰§è¡Œä»»æ„å‘½ä»¤å¹¶æäº¤ç»“æœã€‚ç”Ÿæˆçš„æäº¤é•œåƒå°†ç”¨äº<code>Dockerfile</code>çš„ä¸‹ä¸€æ­¥æ“ä½œ.</p>`,131),p=[l];function t(h,k,r,d,o,c){return a(),i("div",null,p)}const b=s(e,[["render",t]]);export{g as __pageData,b as default};
