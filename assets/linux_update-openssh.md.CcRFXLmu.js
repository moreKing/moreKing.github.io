import{_ as s,c as a,o as n,a4 as i}from"./chunks/framework.DdXzrN3b.js";const u=JSON.parse('{"title":"centos7 升级 openssh9.8p1","description":"","frontmatter":{},"headers":[],"relativePath":"linux/update-openssh.md","filePath":"linux/update-openssh.md","lastUpdated":1723126796000}'),e={name:"linux/update-openssh.md"},l=i(`<h1 id="centos7-升级-openssh9-8p1" tabindex="-1">centos7 升级 openssh9.8p1 <a class="header-anchor" href="#centos7-升级-openssh9-8p1" aria-label="Permalink to &quot;centos7 升级 openssh9.8p1&quot;">​</a></h1><blockquote><p>注意，此操作请在测试环境下先测试，再对业务进行操作</p></blockquote><p>题外话：yum 现在好像已经不能直接使用了，建议替换阿里云仓库</p><p>下载：<a href="https://mirrors.aliyun.com/repo/Centos-7.repo" target="_blank" rel="noreferrer">https://mirrors.aliyun.com/repo/Centos-7.repo</a></p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 备份</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/yum.repos.d/CentOS-Base.repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/yum.repos.d/CentOS-Base.repo.backup</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -O</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/yum.repos.d/CentOS-Base.repo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> http://mirrors.aliyun.com/repo/Centos-7.repo</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clean</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> all</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #清理yum缓存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> makecache</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #生成新的缓存</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #更新yum源</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>不方便下载也可直接复制粘贴</p><div class="language-ini vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># CentOS-Base.repo</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># The mirror system uses the connecting IP address of the client and the</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># update status of each mirror to pick mirrors that are updated to and</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># geographically close to the client.  You should use this for CentOS updates</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># unless you are manually picking other mirrors.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># If the mirrorlist= does not work for you, as a fall back you can try the</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># remarked out baseurl= line instead.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[base]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=CentOS-$releasever - Base - mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">failovermethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=priority</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">baseurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/$releasever/os/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.aliyuncs.com/centos/$releasever/os/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/os/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#released updates</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[updates]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=CentOS-$releasever - Updates - mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">failovermethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=priority</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">baseurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/$releasever/updates/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.aliyuncs.com/centos/$releasever/updates/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/updates/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#additional packages that may be useful</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[extras]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=CentOS-$releasever - Extras - mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">failovermethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=priority</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">baseurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/$releasever/extras/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.aliyuncs.com/centos/$releasever/extras/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/extras/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#additional packages that extend functionality of existing packages</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[centosplus]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=CentOS-$releasever - Plus - mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">failovermethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=priority</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">baseurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/$releasever/centosplus/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.aliyuncs.com/centos/$releasever/centosplus/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/centosplus/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">#contrib - packages by Centos Users</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">[contrib]</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">name</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=CentOS-$releasever - Contrib - mirrors.aliyun.com</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">failovermethod</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=priority</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">baseurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/$releasever/contrib/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.aliyuncs.com/centos/$releasever/contrib/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        http://mirrors.cloud.aliyuncs.com/centos/$releasever/contrib/$basearch/</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgcheck</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=1</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">enabled</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=0</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">gpgkey</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=http://mirrors.aliyun.com/centos/RPM-GPG-KEY-CentOS-7</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br></div></div><h3 id="_1-安装所需编译依赖包" tabindex="-1">1. 安装所需编译依赖包 <a class="header-anchor" href="#_1-安装所需编译依赖包" aria-label="Permalink to &quot;1. 安装所需编译依赖包&quot;">​</a></h3><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -y</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> build-essential</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> perl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gcc-c++</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pam-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  openssl-devel</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  zlib-devel</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h3 id="_2-升级-openssl-版本" tabindex="-1">2. 升级 openssl 版本 <a class="header-anchor" href="#_2-升级-openssl-版本" aria-label="Permalink to &quot;2. 升级 openssl 版本&quot;">​</a></h3><p>由于<code>openssh9.8</code>版本依赖的最低版本<code>openssl1.1.1</code>,centos7 内置的默认版本为 <code>OpenSSL 1.0.2k-fips</code> 不能满足升级要求，因此必须先进行 openssl 升级</p><p>下载源码地址 <a href="https://github.com/openssl/openssl/releases/tag/OpenSSL_1_1_1w" target="_blank" rel="noreferrer">https://github.com/openssl/openssl/releases/tag/OpenSSL_1_1_1w</a></p><h4 id="_2-1-卸载原-openssl" tabindex="-1">2.1 卸载原 openssl <a class="header-anchor" href="#_2-1-卸载原-openssl" aria-label="Permalink to &quot;2.1 卸载原 openssl&quot;">​</a></h4><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">yum</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> remove</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /etc/ssl/</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /tmp/ssl_bak</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h4 id="_2-2-源码编译安装" tabindex="-1">2.2 源码编译安装 <a class="header-anchor" href="#_2-2-源码编译安装" aria-label="Permalink to &quot;2.2 源码编译安装&quot;">​</a></h4><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --prefix=/usr/local/openssl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -j</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/openssl/bin/openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/openssl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/openssl/include/openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/include/openssl</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/openssl/lib/libssl.so.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib64/libssl.so.1.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ln</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -s</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/openssl/lib/libcrypto.so.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/lib64/libcrypto.so.1.1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">openssl</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3-升级-openssh" tabindex="-1">3. 升级 openssh <a class="header-anchor" href="#_3-升级-openssh" aria-label="Permalink to &quot;3. 升级 openssh&quot;">​</a></h3><p>下载：<a href="https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.8p1.tar.gz" target="_blank" rel="noreferrer">https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.8p1.tar.gz</a></p><p>备份原配置：</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/ssh.bak</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/bin/ssh.bak</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/sbin/sshd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/sbin/sshd.bak</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">cp</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -r</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /etc/pam.d/sshd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  /etc/pam.d/sshd.old</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>安装</p><div class="language-sh vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> openssh-9.8p1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./configure</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --sysconfdir=/etc/ssh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  --with-ssl-dir=/usr/local/openssl</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> &amp;&amp; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">make</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>重启操作系统 查看 ssh 版本</strong></p>`,23),p=[l];function r(h,t,k,c,d,o){return n(),a("div",null,p)}const g=s(e,[["render",r]]);export{u as __pageData,g as default};
